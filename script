-- Клиентская часть (LocalScript)
local Player = game:GetService("Players").LocalPlayer
local Character = Player.Character or Player.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")
local UserInputService = game:GetService("UserInputService")

-- Создаем красную полосу для удара
local hitIndicator = Instance.new("Frame")
hitIndicator.Name = "HitIndicator"
hitIndicator.Size = UDim2.new(1, 0, 0.05, 0)
hitIndicator.Position = UDim2.new(0, 0, 0.4, 0)
hitIndicator.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
hitIndicator.BorderSizePixel = 0
hitIndicator.Transparency = 1
hitIndicator.Parent = Player:WaitForChild("PlayerGui"):WaitForChild("TSB_FullCombatUI")

-- Анимация полосы удара
local function ShowHitIndicator()
    hitIndicator.Transparency = 0.5
    hitIndicator.Size = UDim2.new(1, 0, 0.05, 0)
    
    -- Анимация исчезновения
    for i = 1, 10 do
        hitIndicator.Transparency = hitIndicator.Transparency + 0.05
        hitIndicator.Size = UDim2.new(1 - (i*0.1), 0, 0.05, 0)
        hitIndicator.Position = UDim2.new(i*0.05, 0, 0.4, 0)
        task.wait(0.03)
    end
    
    hitIndicator.Transparency = 1
end

-- Модифицируем функцию атаки
local function ExecuteAttack(attackType)
    if not CanAttack() then return end
    
    -- Проигрываем атаку
    CombatAnims[attackType].Track:Play()
    ShowHitIndicator() -- Добавляем визуальный эффект
    
    -- Остальная логика атаки...
end

-- Визуализация комбо при ударе
local function UpdateCombo(points)
    LastAttackTime = os.clock()
    ComboCount = ComboCount + points
    
    -- Эффект при увеличении комбо
    if points > 0 then
        ShowHitIndicator()
        
        -- Усиление эффекта для большого комбо
        if ComboCount >= 5 then
            hitIndicator.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
            hitIndicator.Size = UDim2.new(1.5, 0, 0.08, 0)
        elseif ComboCount >= 3 then
            hitIndicator.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
        end
    end
    
    -- Остальная логика комбо...
end
