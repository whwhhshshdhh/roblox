-- (Весь предыдущий код остается без изменений до раздела Attacks)

-- Обновляем таблицу атак (добавляем рывок)
local Attacks = {
    Light = {
        Key = Enum.KeyCode.Q,
        Damage = 15,
        StaminaCost = 5,
        ComboPoints = 1
    },
    Heavy = {
        Key = Enum.KeyCode.E,
        Damage = 30,
        StaminaCost = 15,
        ComboPoints = 2
    },
    Special = {
        Key = Enum.KeyCode.R,
        Damage = 50,
        StaminaCost = 30,
        ComboPoints = 3
    },
    Dash = {  -- Новый тип атаки - рывок
        Key = {Enum.KeyCode.LeftControl, Enum.KeyCode.RightControl},
        StaminaCost = 20,
        ComboPoints = 0,
        SpeedBoost = 100  -- Сила рывка
    }
}

-- Добавляем в кейбинд-подсказки рывок
local Keybinds = {
    {Key = "Q", Action = "Легкая атака", Color = Color3.fromRGB(255, 150, 150)},
    {Key = "E", Action = "Тяжелая атака", Color = Color3.fromRGB(255, 100, 100)},
    {Key = "F", Action = "Блок", Color = Color3.fromRGB(100, 100, 255)},
    {Key = "R", Action = "Особая атака", Color = Color3.fromRGB(255, 0, 255)},
    {Key = "Ctrl", Action = "Рывок", Color = Color3.fromRGB(100, 200, 255)}  -- Новая подсказка
}

-- Функция рывка
local function ExecuteDash()
    if Stamina < Attacks.Dash.StaminaCost then return end
    
    Stamina = Stamina - Attacks.Dash.StaminaCost
    StaminaText.Text = string.format("СТАМИНА: %d/%d", Stamina, MaxStamina)
    StaminaBar.Size = UDim2.new(Stamina/MaxStamina, 0, 1, 0)
    
    -- Эффект рывка
    local root = Character:WaitForChild("HumanoidRootPart")
    local dashVelocity = root.CFrame.LookVector * Attacks.Dash.SpeedBoost
    root.Velocity = root.Velocity + dashVelocity
    
    -- Визуальный эффект
    local dashEffect = Instance.new("Part")
    dashEffect.Size = Vector3.new(2, 2, 4)
    dashEffect.CFrame = root.CFrame
    dashEffect.Anchored = true
    dashEffect.CanCollide = false
    dashEffect.Transparency = 0.5
    dashEffect.Color = Color3.fromRGB(100, 200, 255)
    dashEffect.Material = Enum.Material.Neon
    dashEffect.Parent = workspace
    game:GetService("Debris"):AddItem(dashEffect, 0.5)
end

-- Функция нанесения урона
local function ApplyDamage(target, damage)
    if target:FindFirstChild("Humanoid") then
        target.Humanoid:TakeDamage(damage)
        return true
    end
    return false
end

-- Модифицируем обработчик ввода
UserInputService.InputBegan:Connect(function(input)
    -- Обработка рывка
    if input.KeyCode == Enum.KeyCode.LeftControl or input.KeyCode == Enum.KeyCode.RightControl then
        ExecuteDash()
        return
    end

    for attackName, attackData in pairs(Attacks) do
        if input.KeyCode == attackData.Key and Stamina >= attackData.StaminaCost then
            Stamina = Stamina - attackData.StaminaCost
            Combo = Combo + attackData.ComboPoints
            LastAttackTime = tick()
            
            -- Обновляем интерфейс
            StaminaText.Text = string.format("СТАМИНА: %d/%d", Stamina, MaxStamina)
            StaminaBar.Size = UDim2.new(Stamina/MaxStamina, 0, 1, 0)
            ComboText.Text = string.format("КОМБО: %dx", Combo)
            
            -- Красная полоса удара
            ShowHit(attackData.Damage)
            
            -- Эффект для комбо
            if Combo >= 5 then
                ComboText.TextColor3 = Color3.fromRGB(255, 50, 50)
            elseif Combo >= 3 then
                ComboText.TextColor3 = Color3.fromRGB(255, 150, 150)
            end
            
            -- Наносим урон перед собой
            local origin = Character:WaitForChild("HumanoidRootPart").Position
            local direction = Character:WaitForChild("HumanoidRootPart").CFrame.LookVector
            local raycastParams = RaycastParams.new()
            raycastParams.FilterDescendantsInstances = {Character}
            
            local raycastResult = workspace:Raycast(origin, direction * 10, raycastParams)
            if raycastResult then
                local target = raycastResult.Instance:FindFirstAncestorOfClass("Model")
                if target then
                    ApplyDamage(target, attackData.Damage)
                end
            end
        end
    end
    
    -- Блок на F
    if input.KeyCode == Enum.KeyCode.F then
        -- Здесь можно добавить анимацию блока
    end
end)

-- (Остальной код без изменений)
